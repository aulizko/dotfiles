#!/usr/local/bin/zsh

export PATH="/usr/local/bin:$PATH"

# Checks if there's a frame open
emacsclient -n -e "(if (> (length (frame-list)) 1) 't)" 2> /dev/null | grep t &> /dev/null

if [ "$?" -eq "1" ]; then
 emacsclient -a '' -nqc "$@" &
else
 emacsclient -n -q "$@" &
fi

osascript -e 'tell application "Emacs" to activate'